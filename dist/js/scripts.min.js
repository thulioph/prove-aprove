var APP=APP||{};APP._nameSpace="APP",APP.delegate=function(scope,method){var methodArguments,i,argumentsLength=arguments.length;if(argumentsLength>2){for(methodArguments=[],i=2;argumentsLength>i;i++)methodArguments.push(arguments[i]);return function(){method.apply(scope,methodArguments)}}return function(){method.apply(scope,arguments)}},APP.init=function(Module){var modulesLength=arguments.length;void 0!==Module&&Module!==APP&&APP.setUp(),0==modulesLength||1==modulesLength?this.readModule(Module||APP):modulesLength>1&&APP.readModule.apply(this,arguments)},APP.setUp=function(){},APP.readModule=function(Module){var node,i=0;{if(!(arguments.length>1)){if("object"!=typeof Module)return!1;if(!Module.hasOwnProperty("setUp")||"function"!=typeof Module.setUp)return!1;Module.setUp();for(node in Module)Module.hasOwnProperty(node)===!0&&null!==Module[node]&&"object"==typeof Module[node]&&(Module[node].parent=function(){return Module},Module[node]._nameSpace=(Module._nameSpace||"APP")+"."+node,APP.readModule(Module[node]));return!1}for(;i<arguments.length;i++)APP.readModule(arguments[i])}},APP.initModuleByNamespace=function(){var argumentsLength,iArguments,argumentsArray;for(argumentsArray=[],iArguments=0;argumentsLength>iArguments;iArguments++)argumentsArray.push(APP.getByNamespace(arguments[iArguments]));APP.init.apply(this,argumentsArray)},APP.getByNamespace=function(namespace){var spaces,spacesLength,iSpace,space,target;if(spaces=namespace.split("."),"APP"!=spaces.shift())return null;for(spacesLength=spaces.length,target=this,iSpace=0;spacesLength>iSpace;iSpace++)space=spaces[iSpace],target.hasOwnProperty(space)&&(target=target[space]);return target},APP.applyByNamespace=function(nameSpace,params){var node,nodes,scopes,target,i;for(void 0!==params&&params instanceof Array==!1&&(params=[params]),scopes=[window],nodes=nameSpace.split("."),i=0;i<nodes.length;i++)node=nodes[i],scopes[i].hasOwnProperty(node)&&scopes.push(scopes[i][node]);return target=scopes.pop(),"function"==typeof target?target.apply(scopes.pop(),params||[]):target};var APP=APP||{};APP.Status={setUp:function(){var handlerStatus;handlerStatus=APP.delegate(this,this.getStatus),$(window).on("online offline",handlerStatus),this.getStatus()},getStatus:function(){1==navigator.onLine?APP.Status.statusOn():APP.Status.statusOff()},statusOn:function(){var body;body=document.querySelector("body"),body.classList.remove("js-offline"),body.removeAttribute("data-status")},statusOff:function(){var body;body=document.querySelector("body"),body.classList.add("js-offline"),body.setAttribute("data-status","Você parece não possuir acesso a internet :(")}};var APP=APP||{};APP.OffCanvas={setUp:function(){this.linksHeader()},linksHeader:function(){$("#header-primary").on("click","a",function(event){event.preventDefault();var href=$(this).attr("href");APP.OffCanvas.showContent(href),APP.OffCanvas.pushMain(href)})},showContent:function(href){$(href).toggleClass("open")},pushMain:function(href){var href=href.replace("#","");$("#main section").toggleClass("js-open-"+href)},initialState:function(){var open=$(".open");open.removeClass("open"),$("#main section").removeClass()}};var APP=APP||{};APP.General={setUp:function(){FastClick.attach(document.body),this.redirect(),this.checkUrl()},goBack:function(){var back,href;back=document.querySelector("#back-internal"),href=window.location.href,$(back).on("click",function(event){event.preventDefault(),window.location.href=href})},checkUrl:function(){var url;return url="http://localhost:9999/unibratec-pos/projeto-final/prove-aprove/app",location.href!=url?console.log("Diferente"):void APP.Request.Receitas.ajax()},redirect:function(){var appSteps,href;href=window.location.href,appSteps=document.querySelector("#app-steps"),$(appSteps).on("click","button",function(){window.location.href=href+this.id})}};var APP=APP||{};APP.Request={setUp:function(){this.getClick()},getClick:function(){var that;that=this,$("#categories-list").on("click","a",function(event){event.preventDefault(),id=$(this).attr("data-id"),APP.Request.ReceitasInterna.ajax(id),APP.OffCanvas.initialState()}),$(".recipe-link").on("click",function(event){event.preventDefault();var id=$(this).attr("data-id");APP.Request.ReceitasInterna.ajax(id)}),$("#meu-usuario").on("click",function(event){event.preventDefault();var user="leandro@gmail.com";APP.Request.Receitas.Usuario.ajax(user),APP.OffCanvas.initialState()})},convertString:function(href,text){var string=JSON.stringify(href);APP.Request.insertLocalStorage(string,text)},insertLocalStorage:function(string,text){localStorage.setItem(text,string)},getLocalStorage:function(text,href){if(null==localStorage.getItem(text))APP.Request.ajax(href,text);else{var href=JSON.parse(localStorage.getItem(text));$("#main").html(href)}}};var APP=APP||{};APP.Request=APP.Request||{},APP.Request.Receitas={setUp:function(){},ajax:function(){var that=this;$.ajax({url:"listar_receitas.php",type:"GET",dataType:"JSON",beforeSend:function(){var recipes,recipesContent;recipes=document.querySelector("#recipes"),recipesContent=document.createElement("div"),recipesContent.setAttribute("id","recipes-content"),recipesContent.innerHTML="Carregando conteúdo..",recipes.appendChild(recipesContent)},success:function(data){if(1==data.status){$("#recipes-content").remove();for(var i=0;i<data.dados.length;i++){{var id=data.dados[i].id,titulo=data.dados[i].titulo,categoria=(data.dados[i].autor,data.dados[i].categoria);data.dados[i].media,data.dados[i].gostou,data.dados[i].favorita}that.structure(titulo,id),that.structureCategorias(categoria,id)}APP.Request.getClick()}else 0==data.status&&console.log(data.mensagem)},error:function(error){console.error(error)}})},structure:function(titulo,id){var recipes=document.querySelector("#recipes"),ul=document.createElement("ul"),li=document.createElement("li"),a=document.createElement("a"),h4=document.createElement("h4"),figure=document.createElement("figure"),img=document.createElement("img");ul.classList.add("recipe-list"),li.classList.add("recipe-item"),a.classList.add("recipe-link"),h4.classList.add("recipe-title"),figure.classList.add("recipe-image"),a.setAttribute("data-id",id),a.setAttribute("href","#"),img.setAttribute("src","http://placehold.it/160x200"),img.setAttribute("alt",titulo),h4.innerHTML=titulo,figure.appendChild(img),a.appendChild(h4),a.appendChild(figure),li.appendChild(a),recipes.appendChild(li)},structureCategorias:function(categoria,id){var ul,li,a;ul=document.querySelector("#categories-list"),li=document.createElement("li"),a=document.createElement("a"),li.classList.add("categories-item"),a.classList.add("categories-link"),a.setAttribute("href","#"),a.setAttribute("data-id",id),a.setAttribute("title",categoria),a.innerHTML=categoria,li.appendChild(a),ul.appendChild(li)}};var APP=APP||{};APP.Request=APP.Request||{},APP.Request.Receitas=APP.Request.Receitas||{},APP.Request.Receitas.Usuario={setUp:function(){},ajax:function(user){$("#main").empty(),$.ajax({url:"listar_receitas.php?filtro=usuario&id="+user,type:"GET",dataType:"JSON",beforeSend:function(){var main,section;main=document.querySelector("#main"),section=document.createElement("section"),section.setAttribute("id","recipes"),section.innerHTML="Carregando conteúdo..",main.appendChild(section)},success:function(data){if($("#recipes").empty(),1==data.status){for(var i=0;i<data.dados.length;i++){{var id=data.dados[i].id,titulo=data.dados[i].titulo;data.dados[i].autor,data.dados[i].categoria,data.dados[i].media,data.dados[i].gostou,data.dados[i].favorita}APP.Request.Receitas.structure(titulo,id)}APP.Request.setUp()}else 0==data.status&&console.log(data.mensagem)},error:function(error){console.error(error)}})}};